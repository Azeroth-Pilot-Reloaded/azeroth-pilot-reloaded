local L = LibStub("AceLocale-3.0"):GetLocale("APR")

APR.RouteList.Vanilla = {
    ["1409-Exile's Reach"] = L["01-10 Exile's Reach"],
}

APR.RouteList.TheBurningCrusade = {}
APR.RouteList.WrathOfTheLichKing = {}
APR.RouteList.Cataclysm = {}
APR.RouteList.MistsOfPandaria = {
    ["371-The Jade Forest"]          = L["The Jade Forest"],
    ["418-Krasarang Wilds"]          = L["Krasarang Wilds"],
    ["379-Kun-Lai Summit"]           = L["Kun-Lai Summit"],
    ["390-Isle of Thunder"]          = L["Isle of Thunder"],
    ["376-Valley of the four winds"] = L["Valley of the four winds"],
    ["388-Townlong Steppes"]         = L["Townlong Steppes"],
    ["390-Dread Wastes"]             = L["Dread Wastes"],
}

APR.RouteList.WarlordsOfDraenor = {}
APR.RouteList.Legion = {
    ["630-Azsuna"] = L["Legion - Azsuna"],
    ["641-ValSharah"] = L["Legion - Val'Sharah"],
    ["619-Highmountain"] = L["Legion - Highmountain"],
    ["634-Stormheim"] = L["Legion - Stormheim"],
}

APR.RouteList.BattleForAzeroth = {}
APR.RouteList.Shadowlands = {
    ["1648-Z0-TheMaw-Story"] = L["SL01 - The Maw"],
    ["1670-Z1-Oribos-Story"] = L["SL02 - Oribos"],
    ["1533-Z2-Bastion-Story"] = L["SL03 - Bastion"],
    ["1670-Z3-Oribos-Story"] = L["SL04 - Oribos"],
    ["1536-Z4-Maldraxxus-Story"] = L["SL05 - Maldraxxus"],
    ["1670-Z5-Oribos-Story"] = L["SL06 - Oribos"],
    ["1960-Z6-TheMaw-Story"] = L["SL07 - The Maw"],
    ["1670-Z7-Oribos-Story"] = L["SL08 - Oribos"],
    ["1536-Z8-Maldraxxus-Story"] = L["SL09 - Maldraxxus"],
    ["1670-Z9-Oribos-Story"] = L["SL10 - Oribos"],
    ["1565-Z10-Ardenweald-Story"] = L["SL11 - Ardenweald"],
    ["1670-Z11-Oribos-Story"] = L["SL12 - Oribos"],
    ["1525-Z12-Revendreth-Story"] = L["SL13 - Revendreth"],
    ["1543-Z13-TheMaw-Story"] = L["SL14 - The Maw"],
    ["1525-Z14-Revendreth-Story"] = L["SL15 - Revendreth"],
    ["1670-Z15-Oribos-Story"] = L["SL16 - Oribos"],
}

APR.RouteList.Dragonflight = {
    ["2022-DF03N-WakingShores"] = L["DF04 - Waking Shores - Neutral"],
    ["2023-DF04-OhnahranPlains"] = L["DF05 - Ohn'Ahran Plains"],
    ["2024-DF05-AzureSpan"] = L["DF06 - Azure Span"],
}

APR.RouteList.TheWarWithin = {
    ["2451-Arathi-Highlands-Returning-Player"] = L["TWW - Arathi Highlands - Returning Player"],
    ["81-TWW-Intro"] = L["TWW - 01 - Intro"],
    ["2248-TWW-Isle-of-Dorn"] = L["TWW - 02 - Isle of Dorn"],
    ["2214-TWW-Ringing-Deeps"] = L["TWW - 03 - Ringing Deeps"],
    ["2215-TWW-Hallowfall"] = L["TWW - 04 - Hallowfall"],
    ["2255-TWW-Azj-Kahet"] = L["TWW - 05 - Azj-Kahet"],
    ["2248-TWW-Against-the-Current-storyline"] = L["TWW - 06 - Against the Current Storyline"],
    ["2248-TWW-Ties-That-Bind-storyline"] = L["TWW - 07 - Ties That Bind Storyline"],
    ["2248-TWW-News-from-Below-storyline"] = L["TWW - 08 - News from Below Storyline"],
    ["2248-TWW-The-Machines-March-to-War-storyline"] = L["TWW - 09 - The Machines March to War Storyline"],
    ["2248-TWW-Light-in-the-Dark-storyline"] = L["TWW - 10 - Light in the Dark Storyline"],
    ["2248-TWW-Lingering-Shadow-Storyline"] = L["TWW - 11 - Lingering Shadow Storyline"],
    ["2248-TWW-Fate-of-the-Kirin-Tor"] = L["TWW - 12 - Fate of the Kirin Tor"],
    ["2248-TWW-Siren-Isle-Intro"] = L["TWW - Siren Isle Intro"],
    ["2248-TWW-Undermine"] = L["TWW - Undermine"],
    ["2248-TWW-Nightfall"] = L["TWW - Nightfall"],
    ["2248-TWW-Rise-of-the-Red-Dawn-Storyline"] = L["TWW - Rise of the Red Dawn"],
    ["2248-TWW-Isle-of-Dorn-campaign-only"] = L["TWW - Isle of Dorn - Campaign Only"],
    ["2214-TWW-Ringing-Deeps-campaign-only"] = L["TWW - Ringing Deeps - Campaign Only"],
    ["2215-TWW-Hallowfall-campaign-only"] = L["TWW - Hallowfall - Campaign Only"],
    ["2255-TWW-Azj-Kahet-campaign-only"] = L["TWW - Azj Kahet - Campaign Only"],
    ["2255-TWW-Allied-Races-Earthen"] = L["TWW Allied Races Earthen"],
    ["2248-TWW-Isle-of-Dorn-Full"] = L["TWW - Isle of Dorn - All quests - Sojourner"],
    ["2214-TWW-Ringing-Deeps-Full"] = L["TWW - Ringing Deeps - All quests - Sojourner"],
    ["2248-TWW-K'aresh-Storyline"] = L["TWW - K'aresh Storyline"],
    ["2248-TWW-K'aresh- Visions of a Shadowed Sun - Storyline"] = L["TWW - K'aresh - Visions of a Shadowed Sun"],
    ["2371-TWW-K'aresh - In Search of Darkness - Storyline"] = L["TWW - In Search of Darkness"],
}

APR.RouteList.Midnight = {
    -- Release
    ["2432-Midnight-Intro"] = L["Midnight - Intro"],
    ["2393-Eversong-Woods"] = L["Midnight - Eversong Woods - sojourner"],
    ["2393-Eversong-Woods-Campaign-Only"] = L["Midnight - Eversong Woods - Campaign"],
    ["2395-ZulAman"] = L["Midnight - Zul'Aman - sojourner"],
    ["2395-ZulAman-Campaign-Only"] = L["Midnight - Zul'Aman - Campaign"],
    -- ["2395-Harandar"] = L["Midnight - Harandar - sojourner"],
    -- ["2395-Harandar-Campaign-Only"] = L["Midnight - Harandar - Campaign"],
    -- ["2395-Voidstorm"] = L["Midnight - Voidstorm - sojourner"],
    -- ["2395-Voidstorm-Campaign-Only"] = L["Midnight - Voidstorm - Campaign"],
    ["2395-Arators-Journey"] = L["Midnight - Arators Journey"],

    -- lvl Max
    ["2395-Rage-of-the-Rendorei"] = L["Midnight - Rage of the Ren'dorei"],
    -- ["2395-The-Darkening-Sky"] = L["Midnight - The Darkening Sky"],
    ["2395-Midnight-Prey"] = L["Midnight - Prey"],
    ["2248-Unlock-void-elf-DH"] = L["Midnight - Unlock Void Elf Demon Hunter"],
}

APR.RouteList.Custom = {}

-- Common starting routes
local startRoutes = {
    -- Races
    Dracthyr = {
        evoker = { expansion = "Dragonflight", key = "2118-DracthyrStart-Evo", label = L["Dracthyr Start"] },
        default = { expansion = "Dragonflight", key = "2118-DracthyrStart-Other", label = L["Dracthyr Start"] }
    },
    EarthenDwarf = { expansion = "TheWarWithin", key = "2248-TWW-Earthen", label = L["Earthen Dwarf Start"] },
    Harronir = { expansion = "Midnight", key = "2413-Midnight-Haranir-Start", label = L["Midnight - Haranir Start"] },

    --Classes
    -- Classes
    ["Death Knight"] = {
        allied = { expansion = "WrathOfTheLichKing", key = "118-Allied_Icecrown Citadel", label = L["Allied Death Knight Start"] },
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Death Knight Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Death Knight Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Blood = { expansion = "Legion", key = "Artifact Weapon - Death Knight - Blood", label = L["Artifact Weapon - Death Knight - Blood"] },
            Frost = { expansion = "Legion", key = "Artifact Weapon - Death Knight - Frost", label = L["Artifact Weapon - Death Knight - Frost"] },
            Unholy = { expansion = "Legion", key = "Artifact Weapon - Death Knight - Unholy", label = L["Artifact Weapon - Death Knight - Unholy"] },
        },
        default = { expansion = "WrathOfTheLichKing", key = "23-ScarletEnclave", label = L["Death Knight Start"] }
    },
    ["Demon Hunter"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Demon Hunter Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Demon Hunter Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Havoc = { expansion = "Legion", key = "Artifact Weapon - Demon Hunter - Havoc", label = L["Artifact Weapon - Demon Hunter - Havoc"] },
            Vengeance = { expansion = "Legion", key = "Artifact Weapon - Demon Hunter - Vengeance", label = L["Artifact Weapon - Demon Hunter - Vengeance"] },
        },
        default = { expansion = "Legion", key = "672-Demon-Hunter-Start", label = L["Demon Hunter Start"] },
    },
    ["Druid"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Druid Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Druid Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Balance = { expansion = "Legion", key = "Artifact Weapon - Druid - Balance", label = L["Artifact Weapon - Druid - Balance"] },
            Feral = { expansion = "Legion", key = "Artifact Weapon - Druid - Feral", label = L["Artifact Weapon - Druid - Feral"] },
            Guardian = { expansion = "Legion", key = "Artifact Weapon - Druid - Guardian", label = L["Artifact Weapon - Druid - Guardian"] },
            Restoration = { expansion = "Legion", key = "Artifact Weapon - Druid - Restoration", label = L["Artifact Weapon - Druid - Restoration"] },
        },
    },
    ["Hunter"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Hunter Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Hunter Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            ["Beast Mastery"] = { expansion = "Legion", key = "Artifact Weapon - Hunter - Beast Mastery", label = L["Artifact Weapon - Hunter - Beast Mastery"] },
            ["Marksmanship"] = { expansion = "Legion", key = "Artifact Weapon - Hunter - Marksmanship", label = L["Artifact Weapon - Hunter - Marksmanship"] },
            ["Survival"] = { expansion = "Legion", key = "Artifact Weapon - Hunter - Survival", label = L["Artifact Weapon - Hunter - Survival"] },
        },
    },
    ["Mage"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Mage Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Mage Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Arcane = { expansion = "Legion", key = "Artifact Weapon - Mage - Arcane", label = L["Artifact Weapon - Mage - Arcane"] },
            Fire = { expansion = "Legion", key = "Artifact Weapon - Mage - Fire", label = L["Artifact Weapon - Mage - Fire"] },
            Frost = { expansion = "Legion", key = "Artifact Weapon - Mage - Frost", label = L["Artifact Weapon - Mage - Frost"] },
        },
    },
    ["Monk"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Monk Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Monk Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Brewmaster = { expansion = "Legion", key = "Artifact Weapon - Monk - Brewmaster", label = L["Artifact Weapon - Monk - Brewmaster"] },
            Mistweaver = { expansion = "Legion", key = "Artifact Weapon - Monk - Mistweaver", label = L["Artifact Weapon - Monk - Mistweaver"] },
            Windwalker = { expansion = "Legion", key = "Artifact Weapon - Monk - Windwalker", label = L["Artifact Weapon - Monk - Windwalker"] },
        },
    },
    ["Paladin"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Paladin Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Paladin Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Holy = { expansion = "Legion", key = "Artifact Weapon - Paladin - Holy", label = L["Artifact Weapon - Paladin - Holy"] },
            Protection = { expansion = "Legion", key = "Artifact Weapon - Paladin - Protection", label = L["Artifact Weapon - Paladin - Protection"] },
            Retribution = { expansion = "Legion", key = "Artifact Weapon - Paladin - Retribution", label = L["Artifact Weapon - Paladin - Retribution"] },
        },
    },
    ["Priest"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Priest Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Priest Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Discipline = { expansion = "Legion", key = "Artifact Weapon - Priest - Discipline", label = L["Artifact Weapon - Priest - Discipline"] },
            Holy = { expansion = "Legion", key = "Artifact Weapon - Priest - Holy", label = L["Artifact Weapon - Priest - Holy"] },
            Shadow = { expansion = "Legion", key = "Artifact Weapon - Priest - Shadow", label = L["Artifact Weapon - Priest - Shadow"] },
        },
    },
    ["Rogue"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Rogue Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Rogue Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Assassination = { expansion = "Legion", key = "Artifact Weapon - Rogue - Assassination", label = L["Artifact Weapon - Rogue - Assassination"] },
            Outlaw = { expansion = "Legion", key = "Artifact Weapon - Rogue - Outlaw", label = L["Artifact Weapon - Rogue - Outlaw"] },
            Subtlety = { expansion = "Legion", key = "Artifact Weapon - Rogue - Subtlety", label = L["Artifact Weapon - Rogue - Subtlety"] },
        },
    },
    ["Shaman"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Shaman Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Shaman Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Elemental = { expansion = "Legion", key = "Artifact Weapon - Shaman - Elemental", label = L["Artifact Weapon - Shaman - Elemental"] },
            Enhancement = { expansion = "Legion", key = "Artifact Weapon - Shaman - Enhancement", label = L["Artifact Weapon - Shaman - Enhancement"] },
            Restoration = { expansion = "Legion", key = "Artifact Weapon - Shaman - Restoration", label = L["Artifact Weapon - Shaman - Restoration"] },
        },
    },
    ["Warlock"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Warlock Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Warlock Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Affliction = { expansion = "Legion", key = "Artifact Weapon - Warlock - Affliction", label = L["Artifact Weapon - Warlock - Affliction"] },
            Demonology = { expansion = "Legion", key = "Artifact Weapon - Warlock - Demonology", label = L["Artifact Weapon - Warlock - Demonology"] },
            Destruction = { expansion = "Legion", key = "Artifact Weapon - Warlock - Destruction", label = L["Artifact Weapon - Warlock - Destruction"] },
        },
    },
    ["Warrior"] = {
        remix = {
            hub = { expansion = "Legion", key = "Order Hall Warrior Part 1", label = L["Remix - Order Hall - Start"] },
            hub2 = { expansion = "Legion", key = "Order Hall Warrior Part 2", label = L["Remix - Order Hall - Next"] },
        },
        spec = {
            Arms = { expansion = "Legion", key = "Artifact Weapon - Warrior - Arms", label = L["Artifact Weapon - Warrior - Arms"] },
            Fury = { expansion = "Legion", key = "Artifact Weapon - Warrior - Fury", label = L["Artifact Weapon - Warrior - Fury"] },
            Protection = { expansion = "Legion", key = "Artifact Weapon - Warrior - Protection", label = L["Artifact Weapon - Warrior - Protection"] },
        },
    },
}


function APR:InitRoutes()
    --- Faction order -> Neutral -> Alliance / Horde
    if APR.Faction == "Neutral" and (APR.Race == "Pandaren") then
        APR.RouteList.MistsOfPandaria["378-Panda Starting Zone"] = L["Pandaren Neutral Start"]
        return -- do not add other routes for neutral faction
    end

    ---
    ---  WARNING Class before race
    ---

    local routesToAssign = {}
    local className = APR:GetClassNameById(APR.ClassId)
    if APR:IsRemixCharacter() then
        -- specific remix start routes
        table.insert(routesToAssign,
            { expansion = "MistsOfPandaria", key = "554-MoP Remix Intro", label = L["MoP Remix - Intro"] })
        table.insert(routesToAssign,
            { expansion = "Legion", key = "627-Intro-Remix", label = L["Legion - Intro Remix"] })

        table.insert(routesToAssign, startRoutes[className].remix.hub)
        table.insert(routesToAssign, startRoutes[className].remix.hub2)
    elseif APR.ClassId == APR.Classes["Death Knight"] then
        -- Use allied start if race ID is >= 23; otherwise, default Death Knight start
        if APR.RaceID >= 23 then
            table.insert(routesToAssign, startRoutes["Death Knight"].allied)
        else
            table.insert(routesToAssign, startRoutes["Death Knight"].default)
        end
    elseif APR.Race == "Dracthyr" then
        -- Check for Dracthyr Evoker-specific start, else use general Dracthyr start
        if APR.ClassId == APR.Classes.Evoker then
            table.insert(routesToAssign, startRoutes.Dracthyr.evoker)
        else
            table.insert(routesToAssign, startRoutes.Dracthyr.default)
        end
    elseif startRoutes[className].default then
        -- Classes
        table.insert(routesToAssign, startRoutes[className].default)
    else
        -- Race
        table.insert(routesToAssign, startRoutes[APR.Race])
    end


    -- Class Specs
    if startRoutes[className] and startRoutes[className].spec then
        for specName, specRoute in pairs(startRoutes[className].spec) do
            table.insert(routesToAssign, specRoute)
        end
    end



    -- Lumbermill Wod route
    -- Special case for Warlords of Draenor route based on quest completion
    local gorgrondRoute
    if C_QuestLog.IsQuestFlaggedCompleted(35049) then
        gorgrondRoute = {
            expansion = "WarlordsOfDraenor",
            key = "543-DesMephisto-Gorgrond-Lumbermill",
            label = L["WOD04 - Gorgrond"],
        }
    else
        gorgrondRoute = {
            expansion = "WarlordsOfDraenor",
            key = "543-DesMephisto-Gorgrond",
            label = L["WOD04 - Gorgrond"],
        }
    end
    table.insert(routesToAssign, gorgrondRoute)

    -- Apply all collected routes
    APR:assignRoutes(routesToAssign)

    -- //TODO to be removed later
    if self.isMidnightPrePatchVersion then
        APR.RouteList.Midnight = {
            -- Pre Patch
            ["2395-Midnight-Pre-Patch"] = L["Midnight - Pre Patch"],
            ["2248-Unlock-void-elf-DH"] = L["Midnight - Unlock Void Elf Demon Hunter"]
        }
    end
end
